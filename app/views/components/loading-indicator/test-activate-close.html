<div class="row">
  <div class="six columns">
    <h2>Loading Indicator Test: Activate and Close</h2>
    <p>Fixed an error was showing when called `close()` method too soon after `activate()`. (Github issue <a href="https://github.com/infor-design/enterprise-ng/issues/980">#980</a>)</p>
    <p></p>
  </div>
</div>

<div class="row">
  <div class="six columns">

    <form id="loading-form" class="loading" action="#" method="POST">
      <div class="field">
        <label for="loading-field-name">Name</label>
        <input id="loading-field-name" name="loading-field-name" />
      </div>
      <div class="field">
        <label for="loading-field-address">Address</label>
        <input id="loading-field-address" name="loading-field-address" />
      </div>
      <div class="field">
        <label for="loading-field-cats">Number of Cats</label>
        <input id="loading-field-cats" name="loading-field-cats" />
      </div>
      <div class="field">
        <button type="reset" id="reset" class="btn-secondary">Clear</button>
        <button type="submit" id="submit" class="btn-primary">Submit to activate Loading Indicator</button>
      </div>
    </form>

  </div>
</div>

<script>
  $('body').on('initialized', function() {

    var loadingApi = $('#loading-form').data('loading-indicator');
    var delay = 1;

    $('#submit').click(function(e) {
      e.preventDefault();
      if (loadingApi) {
        // Activate loading-indicator
        loadingApi.activate();
        showToast('Activated');

        setTimeout(function() {
          // Close loading-indicator
          loadingApi.close();
          showToast('Closed');
        }, delay);
      }
    });

    // Show toast
    function showToast (option) {
      $('body').toast({
        title: 'Busyindicator',
        message: option
      });
      console.log('Busyindicator: '+ option);
    }

  });
</script>
